<odoo>
	<data>

		<!-- explicit search view definition -->
		<record id="fiscalyears_search" model="ir.ui.view">
			<field name="name">fiscalyears search</field>
			<field name="model">fiscalyears</field>
			<field name="arch" type="xml">
				<search string="Fiscal Years">
					<field name="start_date"/>
					<field name="end_date"/>
					<field name="type"/>
					<group expand="0" string="Group By...">
						<filter string="Type" domain="[]" context="{'group_by':'type'}"/>
					</group>
				</search>
			</field>
		</record>

		<!-- explicit list view definition -->
		<record model="ir.ui.view" id="fiscalyears_list">
			<field name="name">fiscalyears list</field>
			<field name="model">fiscalyears</field>
			<field name="arch" type="xml">
				<tree>
					<field name="name"/>
					<field name="start_date"/>
					<field name="end_date"/>
					<field name="state"/>
				</tree>
			</field>
		</record>

		<!-- explicit form view definition -->
		<record id="fiscalyears_form" model="ir.ui.view">
			<field name="name">fiscalyears form</field>
			<field name="model">fiscalyears</field>
			<field name="arch" type="xml">
				<form string="Fiscal Year">
					<header>
						<button name="create_periods" states="draft" string="Create Periods" type="object" class="oe_highlight"/>
						<button name="open" states="draft,closed" string="Open" type="object" class="oe_highlight"/>
						<button name="close" states="open" string="Close" type="object" class="oe_highlight"/>
						<button name="cancel" states="draft,open" string="Cancel" type="object" class="oe_highlight"/>
						<button name="draft" states="cancel" string="To Draft" type="object" class="oe_highlight"/>
						<field name="state" widget="statusbar" statusbar_visible="draft,open,close"/>
					</header>
					<sheet>
						<field name="code" />
						<div class="oe_title">
							<label for="name" class="oe_edit_only"/>
							<h1>
								<field name="name" attrs="{'required':True,'readonly':[('state','!=','draft')]}"/>
							</h1>
						</div>
						<group>
							<group>
								<field name="start_date" attrs="{'required':True,'readonly':[('state','!=','draft')]}"/>
								<field name="end_date" attrs="{'required':True,'readonly':[('state','!=','draft')]}"/>
							</group>
							<group>
								<field name="type" attrs="{'required':True,'readonly':[('state','!=','draft')]}"/>
							</group>
						</group>
						<notebook>
							<page string="periods">
								<field name="periods_ids" attrs="{'required':True,'readonly':[('state','!=','draft')]}">
									<tree>
										<field name="name" />
										<field name="start_date" />
										<field name="end_date" />
									</tree>
								</field>
							</page>
						</notebook>
					</sheet>
				</form>
			</field>
		</record>

		<!-- actions opening views on models -->
		<record model="ir.actions.act_window" id="fiscalyears_action_window">
			<field name="name">Fiscal Years</field>
			<field name="res_model">fiscalyears</field>
			<field name="view_mode">tree,form</field>
		</record>

		<!-- explicit search view definition -->
		<record id="fiscalyears_periods_search" model="ir.ui.view">
			<field name="name">fiscalyears_periods search</field>
			<field name="model">fiscalyears.periods</field>
			<field name="arch" type="xml">
				<search string="Fiscal Years">
					<field name="start_date"/>
					<field name="end_date"/>
					<field name="state"/>
					<field name="fiscalyear_id"/>
					<group expand="0" string="Group By...">
						<filter string="Type" domain="[]" context="{'group_by':'fiscalyear_id.type'}"/>
						<filter string="Fiscal Year" domain="[]" context="{'group_by':'fiscalyear_id'}"/>
					</group>
				</search>
			</field>
		</record>

		<!-- explicit list view definition -->
		<record model="ir.ui.view" id="fiscalyears_periods_list">
			<field name="name">fiscalyears_periods list</field>
			<field name="model">fiscalyears.periods</field>
			<field name="arch" type="xml">
				<tree create="false">
					<field name="name"/>
					<field name="start_date"/>
					<field name="end_date"/>
					<field name="state"/>
				</tree>
			</field>
		</record>

		<!-- explicit form view definition -->
		<record id="fiscalyears_periods_form" model="ir.ui.view">
			<field name="name">fiscalyears_periods form</field>
			<field name="model">fiscalyears.periods</field>
			<field name="arch" type="xml">
				<form string="Fiscal Year Period">
					<header>
						<button name="open" states="draft,closed" string="Open" type="object" class="oe_highlight"/>
						<button name="close" states="open" string="Close" type="object" class="oe_highlight"/>
						<button name="cancel" states="draft,open" string="Cancel" type="object" class="oe_highlight"/>
						<button name="draft" states="cancel" string="To Draft" type="object" class="oe_highlight"/>
						<field name="state" widget="statusbar" statusbar_visible="draft,open,close"/>
					</header>
					<sheet>
						<div class="oe_title">
							<label for="name" class="oe_edit_only"/>
							<h1>
								<field name="name"/>
							</h1>
						</div>
						<group>
							<group>
								<field name="start_date" readonly="1"/>
								<field name="end_date" readonly="1"/>
							</group>
						</group>
					</sheet>
				</form>
			</field>
		</record>

		<!-- actions opening views on models -->
		<record model="ir.actions.act_window" id="fiscalyears_periods_action_window">
			<field name="name">Fiscal Years Periods</field>
			<field name="res_model">fiscalyears.periods</field>
			<field name="view_mode">tree,form</field>
		</record>

		<!-- actions -->
		<menuitem name="Fiscal Years" id="fiscalyears_main_menu_fiscalyears" groups="fiscalyears.group_fiscalyear_manager"/>
		<menuitem name="Fiscal Years" id="fiscalyears_menu_fiscalyears" parent="fiscalyears_main_menu_fiscalyears" action="fiscalyears_action_window" groups="fiscalyears.group_fiscalyear_manager"/>
		<menuitem name="Periods" id="fiscalyears_menu_fiscalyears_periods" parent="fiscalyears_main_menu_fiscalyears" action="fiscalyears_periods_action_window" groups="fiscalyears.group_fiscalyear_manager"/>
	</data>
</odoo>