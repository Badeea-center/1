<?xml version="1.0" encoding="UTF-8"?>
<odoo>
    <data noupdate="0">
        <record id="module_requisition_donation_category" model="ir.module.category">
            <field name="name">Requisition Donation</field>
        </record>
        <record id="group_requisition_user" model="res.groups">
            <field name="name">Requisition User</field>
            <field name="category_id" ref="requisition_order.module_requisition_donation_category"/>
        </record>

        <record id="group_service_officer" model="res.groups">
            <field name="name">Service Officer</field>
            <field name="category_id" ref="requisition_order.module_requisition_donation_category"/>
        </record>

        <record id="group_department_manager" model="res.groups">
            <field name="name">Department Manager</field>
            <field name="category_id" ref="requisition_order.module_requisition_donation_category"/>
            <field name="implied_ids" eval="[(4, ref('group_requisition_user'))]"/>
        </record>


        <!-- requisition requests for requisition user -->
        <record id="requisition_request_rule_requisition_user" model="ir.rule">
            <field name="name">requisition user requisition requests </field>
            <field name="model_id" ref="requisition_order.model_requisition_request"/>
            <field name="domain_force">[('analytic_account_id','child_of',[user.employee_ids and (user.employee_ids[0].department_id.analytic_account_id and user.employee_ids[0].department_id.analytic_account_id.id or False) or False])]</field>
            <field name="groups" eval="[(4, ref('requisition_order.group_requisition_user'))]"/>
        </record>

        <!-- requisition requests for service officer -->
        <record id="requisition_request_rule_service_officer" model="ir.rule">
            <field name="name">service officer requisition requests </field>
            <field name="model_id" ref="requisition_order.model_requisition_request"/>
            <field name="domain_force">[('analytic_account_id','child_of',[user.employee_ids and (user.employee_ids[0].department_id.analytic_account_id and user.employee_ids[0].department_id.analytic_account_id.id or False) or False])]</field>
            <field name="groups" eval="[(4, ref('requisition_order.group_service_officer'))]"/>
        </record>


    </data>
</odoo>
