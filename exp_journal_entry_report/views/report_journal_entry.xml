<?xml version="1.0" encoding="utf-8" ?>
<odoo>

    <!--Report-->
    <!--Report-->
    <template id="custom_internal_layout">
        <!-- Multicompany -->
        <t t-if="o and 'company_id' in o">
            <t t-set="company" t-value="o.company_id"/>
        </t>
        <t t-if="not o or not 'company_id' in o">
            <t t-set="company" t-value="res_company"/>
        </t>
        <div class="header">
            <div class="row">
                <div dir="rtl">
                    <img t-if="company.logo" t-att-src="'data:image/png;base64,%s' % to_text(company.logo)" style="max-height: 300px;align:right"/>
                </div>
            </div>
        </div>
        <div class="article">
            <t t-raw="0" />
        </div>
    </template>
    <template id="report_journal_entry_document">
        <t t-call="exp_journal_entry_report.custom_internal_layout">
            <t t-set="total_debit" t-value="0"/>
            <t t-set="total_credit" t-value="0"/>
            <t t-set="o" t-value="doc" />
            <style type="text/css">
                @font-face {
                font-family: 'ae_AlMohanad';
                src: local('ae_AlMohanad'), local('ae_AlMohanad'),
                url('/exp_journal_entry_report/static/fonts/ae_AlMohanad.ttf') format('truetype');
                }
                *{
                font-family: ae_AlMohanad;
                }
            </style>
            <br/>
            <br/>
            <div class="page" style="font-size: 12pt !important;" dir="rtl">
                <center><h3><b>رقم القيد‬(<span t-field="o.name"/>)</b></h3></center>
                <br/>
                <br/>
                <br/>
                <table style="width: 80%;height=40%;text-align:right">
                    <thead>
                        <tr>
                            <strong>
                                <th style="text-align:center;background-color:#B0C4DE;">التاريخ</th>
                                <th style="text-align:center;background-color:#B0C4DE;width: 65%">دفتر اليومية</th>
                                <th style="text-align:center;background-color:#B0C4DE;width: 70%">المرجع</th>
                            </strong>
                        </tr>
                    </thead>
                    <tbody>
                        <strong>
                            <tr>
                                <td><span style = "font-weight: bold;" t-field="o.date"/></td>
                                <td><span style = "font-weight: bold;width: 65%" t-field="o.journal_id"/></td>
                                <td><span style = "font-weight: bold;width: 70%" t-field="o.ref"/></td>
                            </tr>
                        </strong>
                    </tbody>
                </table>
                <br/>
                <br/>
                <table class="table table-condensed" style="width: 100%;height=90%;text-align:right">
                    <thead>
                        <tr>
                            <th style="text-align:center;background-color:#B0C4DE;width: 30%">الحساب</th>
                            <!--                            <th  groups="analytic.group_analytic_accounting">-->
                            <th style="text-align:center;background-color:#B0C4DE;width: 10%">الشريك</th>
                            <th style="text-align:center;background-color:#B0C4DE;width: 30%">التفاصيل</th>
                            <th style="text-align:center;background-color:#B0C4DE;width: 20%">الحساب التحليلي</th>
                            <th style="text-align:center;background-color:#B0C4DE;width: 10%">المدين</th>
                            <th style="text-align:center;background-color:#B0C4DE;width: 10%">الدائن</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr t-foreach="o.line_ids" t-as="l">
                            <td style="width: 30%"><span t-field="l.account_id"/></td>
                            <td style="width: 10%"><span t-field="l.partner_id"/></td>
                            <td style="width: 30%"><span t-field="l.name"/></td>
                            <td style="width: 20%">
                                <span t-field="l.analytic_account_id"/>
                            </td>
                            <td style="width: 10%"><span t-raw="l.debit"/></td>
                            <t t-set="total_debit" t-value="total_debit+l.debit"/>
                            <td style="width: 10%"><span t-raw="l.credit"/></td>
                            <t t-set="total_credit" t-value="total_credit+l.credit"/>
                        </tr>
                    </tbody>
                    <tfoot style="border: 1px solid #000;">
                        <tr style="width: 100%; border: 1px solid #000;">
                            <td class="text-center"
                                style="border: 1px solid #000;font-weight: bold;font-size: 20px;" colspan="4">
                                المجــــــــــــــــــــــــــــــــــــموع
                            </td>
                            <td class="text-center"
                                style="border: 1px solid #000;font-weight: bold;font-size: 20px;" colspan="1">
                                <span t-esc="total_debit"
                                      style="direction: rtl; font-size: 16px; font-weight: bold;"/>
                            </td>
                            <td class="text-center"
                                style="border: 1px solid #000; font-weight: bold;font-size: 16px;" colspan="1">
                                <span t-esc="total_credit"
                                      style="direction: rtl; font-size: 16px; font-weight: bold;"/>                                </td>
                        </tr>
                    </tfoot>
                </table>
                <style>
                    table {
                    border-collapse: collapse;

                    }

                    table{
                    border: 1px solid black;
                    }
                    td{
                    border: 1px solid grey;
                    padding: 5px 5px 5px 5px;
                    }
                    th{
                    border: 1px solid grey;
                    padding: 5px 5px 5px 5px;
                    font-weight: bold;
                    }
                </style>
            </div>
        </t>
    </template>
    <!--TEMPLATE [JOURNAL ENTRY REPORT]-->
    <template id="report_journal_entry">
        <t t-call="web.html_container">
            <t t-foreach="docs" t-as="doc">
                <t t-call="exp_journal_entry_report.report_journal_entry_document"/>
            </t>
        </t>
    </template>
    <record model="report.paperformat" id="paperformat_journal_report">
        <field name="name">paperformat.invoice.header.report</field>
        <field name="format">A4</field>
        <field name="orientation">Portrait</field>
        <field name="margin_top">60</field>
        <field name="margin_right">5</field>
        <field name="margin_bottom">5</field>
        <field name="margin_left">5</field>
        <field name="header_line" eval="False"/>
        <field name="header_spacing">60</field>
        <field name="dpi">90</field>
    </record>
    <report id="action_report_journal_entry"
            model="account.move"
            string="Journal Entries"
            report_type="qweb-pdf"
            name="exp_journal_entry_report.report_journal_entry"
            file="exp_journal_entry_report.report_journal_entry"
            paperformat="paperformat_journal_report"
            attachment_use="False"
    />
</odoo>